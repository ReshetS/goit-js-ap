{"version":3,"file":"commonHelpers.js","sources":["../src/js/functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\naxios.defaults.baseURL = 'https://668581e2b3f57b06dd4cf9fd.mockapi.io/api/v1'; //задаємо базову адресу нашого бекенду для аксіос\n\nexport function addBablo(user) {\n  // створюємо функцію для обробки прослуховувача кліку кнопки\n  const countSpan = document.querySelector('#count'); // витягуємо елемент спану у змінну\n  user.bablo += 1; // збільшуємо значення бабла у об'єкта юзера на 1\n  axios\n    .patch(`user/${user.userID}`, { bablo: user.bablo }) //змінюємо значення бабла у юзера на бекенді\n    .then(function () {\n      countSpan.innerHTML = user.bablo; //якщо змінилось значення бабла на фронтенді то змінюємо значення і на бекенді\n    })\n    .catch(function (error) {\n      console.log(error);\n    });\n}\n","import axios from 'axios';\nimport { addBablo } from './js/functions'; // імпортуємо функцію прослуховувача\n\nconst button = document.querySelector('.button'); // витягуємо елемент кнопки для додавання прослуховувача\nconst countSpan = document.querySelector('#count'); // витягуємо елемент спану у змінну\n\naxios.defaults.baseURL = 'https://668581e2b3f57b06dd4cf9fd.mockapi.io/api/v1'; //задаємо базову адресу нашого бекенду для аксіос\nconst LS_KEY = 'UserID'; //задаємо ключ для локал сторедж\nconst user = { bablo: 0 }; // створюємо об'єкт юзера з дефолтними даними\nconst savedData = localStorage.getItem(LS_KEY); // дістаємо значення із стореджу\n\nif (savedData === null) {\n  //якщо сторедж пустий, то ...\n  axios\n    .post('user', user) // створюємо нового юзера на бекенді\n    .then(function (response) {\n      user.userID = Number(response.data.userID); // в об'єкт юзера заносимо його новостворений ІД у числовому форматі\n      localStorage.setItem(LS_KEY, JSON.stringify(user.userID)); // зберігаємо ІД юзера у ЛС\n    })\n    .catch(function (error) {\n      console.log(error);\n    });\n} else {\n  // якщо сторедж не пустий, то ...\n  user.userID = Number(savedData); //в об'єкт юзера заносимо його ІД з ЛС\n  axios\n    .get(`user/${user.userID}`) // здійснюємо запит на бекенд по ІД юзера\n    .then(function (response) {\n      console.log(response);\n      user.bablo = response.data.bablo; // в об'єкт юзера записуємо кількість його бабла\n      countSpan.innerHTML = user.bablo;\n    })\n    .catch(function (error) {\n      console.log(error);\n    });\n}\n\nbutton.addEventListener('click', () => {\n  addBablo(user);\n}); // додаємо прослуховувач по кліку\n"],"names":["axios","addBablo","user","countSpan","error","button","LS_KEY","savedData","response"],"mappings":"svBACAA,EAAM,SAAS,QAAU,qDAElB,SAASC,EAASC,EAAM,CAE7B,MAAMC,EAAY,SAAS,cAAc,QAAQ,EACjDD,EAAK,OAAS,EACdF,EACG,MAAM,QAAQE,EAAK,MAAM,GAAI,CAAE,MAAOA,EAAK,MAAO,EAClD,KAAK,UAAY,CAChBC,EAAU,UAAYD,EAAK,KACjC,CAAK,EACA,MAAM,SAAUE,EAAO,CACtB,QAAQ,IAAIA,CAAK,CACvB,CAAK,CACL,CCZA,MAAMC,EAAS,SAAS,cAAc,SAAS,EACzCF,EAAY,SAAS,cAAc,QAAQ,EAEjDH,EAAM,SAAS,QAAU,qDACzB,MAAMM,EAAS,SACTJ,EAAO,CAAE,MAAO,GAChBK,EAAY,aAAa,QAAQD,CAAM,EAEzCC,IAAc,KAEhBP,EACG,KAAK,OAAQE,CAAI,EACjB,KAAK,SAAUM,EAAU,CACxBN,EAAK,OAAS,OAAOM,EAAS,KAAK,MAAM,EACzC,aAAa,QAAQF,EAAQ,KAAK,UAAUJ,EAAK,MAAM,CAAC,CAC9D,CAAK,EACA,MAAM,SAAUE,EAAO,CACtB,QAAQ,IAAIA,CAAK,CACvB,CAAK,GAGHF,EAAK,OAAS,OAAOK,CAAS,EAC9BP,EACG,IAAI,QAAQE,EAAK,MAAM,EAAE,EACzB,KAAK,SAAUM,EAAU,CACxB,QAAQ,IAAIA,CAAQ,EACpBN,EAAK,MAAQM,EAAS,KAAK,MAC3BL,EAAU,UAAYD,EAAK,KACjC,CAAK,EACA,MAAM,SAAUE,EAAO,CACtB,QAAQ,IAAIA,CAAK,CACvB,CAAK,GAGLC,EAAO,iBAAiB,QAAS,IAAM,CACrCJ,EAASC,CAAI,CACf,CAAC"}