import{a as c,i as b}from"./assets/vendor-ae6d56ab.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))u(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&u(i)}).observe(document,{childList:!0,subtree:!0});function d(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerPolicy&&(o.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?o.credentials="include":t.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function u(t){if(t.ep)return;t.ep=!0;const o=d(t);fetch(t.href,o)}})();const r={button:document.querySelector(".button"),countSpan:document.querySelector("#count")},f="https://668581e2b3f57b06dd4cf9fd.mockapi.io/api/v1",a="UserID";c.defaults.baseURL=f;function p(e){r.button.disabled=!0,r.button.innerHTML='<span class="loader"></span>&nbsp;&nbsp;&nbsp;Нарахування бабла...',setTimeout(()=>{e.bablo+=1,c.put(`user/${e.userID}`,e).then(function(){r.countSpan.innerHTML=e.bablo.toString()}).catch(function(n){console.log(n)}).finally(()=>{r.button.innerHTML="Бабло!",r.button.disabled=!1})},Math.random()*3e3)}function m(e){c.post("user",{bablo:0}).then(function(n){e.userID=Number(n.data.userID),e.bablo=0,r.countSpan.innerHTML="0",localStorage.setItem(a,JSON.stringify(e.userID))}).catch(function(n){console.log(n)})}c.defaults.baseURL=f;const s={bablo:0},l=localStorage.getItem(a);l===null?c.post("user",s).then(function(e){s.userID=Number(e.data.userID),localStorage.setItem(a,JSON.stringify(s.userID))}).catch(function(e){console.log(e)}):(s.userID=Number(l),c.get(`user/${s.userID}`).then(function(e){console.log(e),s.bablo=e.data.bablo,r.countSpan.innerHTML=s.bablo.toString()}).catch(function(e){console.log(e),e.response&&e.response.status===404?m(s):b.error({title:"Помилка",message:"Виникла помилка при запиті Ваших даних з серверу. Спробуйте пізніше",position:"topRight"})}));r.button.addEventListener("click",()=>{p(s)});
//# sourceMappingURL=commonHelpers.js.map
